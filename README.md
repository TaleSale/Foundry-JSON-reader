# Просмотрщик JSON-файлов Foundry VTT

Это веб- приложение, предназначенное для просмотра и организации игровых данных, экспортированных из Foundry VTT. Вы можете загружать JSON-файлы для Журналов, Существ (Actors) и Предметов, чтобы просматривать их в удобном интерфейсе, имитирующем внешний вид Foundry, даже без доступа к самой программе.

## Ключевые особенности

-   **Загрузка данных:**
    -   Загружайте отдельные `.json` файлы для Журналов, Существ и Предметов.
    -   Приложение автоматически определяет тип загружаемого файла.

-   **Управление миром:**
    -   **Сохраняйте** всю вашу сессию (все загруженные данные и папки) в единый файл `foundry-world.json`.
    -   **Загружайте** файл мира, чтобы мгновенно восстановить ваше рабочее пространство.

-   **Организация контента:**
    -   Раздельные вкладки для управления Журналами, Существами и Предметами.
    -   Создавайте **папки** для каждой категории, чтобы структурировать ваши данные.
    -   Используйте **перетаскивание (drag-and-drop)** для легкой организации записей по папкам.
    -   Удаляйте отдельные записи или целые папки.

-   **Удобный просмотр:**
    -   **Многовкладочный интерфейс** позволяет держать открытыми несколько документов одновременно.
    -   Стилизация, вдохновленная интерфейсом Foundry VTT, для привычного вида.
    -   **Журналы:** Корректное отображение HTML-содержимого, включая стили, таблицы и специальные блоки. Поддерживаются внутренние ссылки на другие страницы журнала, существ и предметы.
    -   **Существа:** Детальный лист персонажа, отображающий характеристики, навыки, атаки, заклинания, инвентарь и заметки.
    -   **Предметы:** Подробный просмотр снаряжения, оружия, доспехов и других предметов.

-   **Поиск и навигация:**
    -   **Глобальный поиск** позволяет мгновенно находить любую запись по названию среди всех загруженных данных.
    -   Кликабельные **внутренние ссылки** в документах (например, `@UUID[Actor...]{Имя Актера}`) автоматически открывают соответствующий лист существа.

-   **Локализация:**
    -   Приложение по умолчанию использует встроенный русский файл локализации.
    -   Вы можете загрузить собственный `.json` файл локализации, чтобы заменить ключи (например, `@Localize[PF2E.TraitDwarf]`) на переведенный текст.

## Как пользоваться приложением

### Шаг 1: Экспорт данных из Foundry VTT

Прежде чем использовать просмотрщик, вам нужно получить ваши данные из Foundry.

1.  Запустите ваш мир в Foundry VTT.
2.  В боковой панели (справа) найдите нужную запись (например, в разделе "Journal Entries" или "Actors").
3.  Нажмите на запись правой кнопкой мыши и выберите опцию **"Export Data"**.
4.  Сохраните сгенерированный `.json` файл на вашем компьютере.

### Шаг 2: Загрузка данных в просмотрщик

Используйте правую боковую панель в приложении для загрузки и управления вашими файлами.

-   **Загрузка отдельных файлов:**
    1.  Перейдите на одну из вкладок: **"Журналы"**, **"Актеры"** или **"Предметы"**.
    2.  Нажмите на оранжевую кнопку ("Создать журнал", "Создать актера" и т.д.), чтобы открыть диалог выбора файла.
    3.  Выберите соответствующий `.json` файл, экспортированный из Foundry. Файл будет добавлен в список, и его содержимое откроется в основной области просмотра.

-   **Загрузка файла мира:**
    1.  Перейдите на вкладку **"Миры"**.
    2.  Нажмите кнопку **"Load World"** и выберите ранее сохраненный файл `foundry-world.json`.
    3.  Все ваши данные, включая папки, будут восстановлены.

-   **Загрузка файла локализации:**
    1.  Перейдите на вкладку **"Миры"**.
    2.  Нажмите **"Загрузить файл локализации"** и выберите ваш `.json` файл с переводами.
    3.  Текстовые ключи в открытых документах автоматически заменятся на переведенные значения.

### Шаг 3: Просмотр и навигация

-   **Открытие документов:** Нажмите на любую запись в правой панели, чтобы открыть ее в новой вкладке в основной области просмотра.
-   **Переключение вкладок:** Вы можете легко переключаться между несколькими открытыми документами, нажимая на их названия вверху основной панели.
-   **Внутренние ссылки:** Если в тексте журнала есть ссылка на другое существо или предмет (например, `Арагог`), нажмите на нее, чтобы автоматически открыть соответствующий лист, если он загружен в приложение.

### Шаг 4: Организация данных

-   **Создание папок:** На вкладках "Журналы", "Актеры" или "Предметы" нажмите кнопку **"Создать папку"**. Введите имя и нажмите Enter.
-   **Перемещение записей:** Просто перетащите любую запись из общего списка (или из другой папки) на название нужной папки. Запись будет перемещена. Чтобы сделать запись "неприкрепленной", перетащите ее на пустое место в списке.

### Шаг 5: Поиск

-   В верхней части правой панели находится поле **"Поиск..."**.
-   Начните вводить название журнала, существа или предмета. Список под поисковой строкой будет мгновенно отфильтрован, показывая все совпадения по всем категориям.
-   Нажмите на результат поиска, чтобы открыть его.

### Шаг 6: Сохранение рабочего пространства

-   Когда вы закончили организацию данных, перейдите на вкладку **"Миры"**.
-   Нажмите кнопку **"Save World"**.
-   Браузер предложит сохранить файл `foundry-world.json`. Этот файл содержит все загруженные вами журналы, существ, предметы, а также структуру папок. Вы сможете загрузить его в следующий раз, чтобы продолжить работу.

## Развертывание (Deployment)

Этот проект настроен для автоматического развертывания на GitHub Pages с использованием GitHub Actions.

### Как это работает

1.  **Push в `main`**: Каждый раз, когда вы отправляете изменения в ветку `main`, автоматически запускается рабочий процесс GitHub Actions.
2.  **Сборка проекта**: Action устанавливает все зависимости и собирает приложение с помощью `npm run build`.
3.  **Деплой**: Собранные статические файлы (из папки `dist`) автоматически развертываются на GitHub Pages.

### **ОБЯЗАТЕЛЬНАЯ НАСТРОЙКА РЕПОЗИТОРИЯ**

Чтобы развертывание работало, **вы должны** выполнить эту однократную настройку в вашем репозитории на GitHub:

1.  Перейдите в настройки вашего репозитория (**Settings**).
2.  В меню слева выберите **Pages**.
3.  В разделе "Build and deployment" в выпадающем списке **Source** выберите **"GitHub Actions"**.

**Это самый важный шаг!** Если его не выполнить, ваш сайт не будет опубликован, даже если рабочий процесс (Action) завершится успешно.

### Доступ к сайту

После успешного завершения Action ваш сайт будет доступен по адресу:

`https://<ВАШЕ_ИМЯ_ПОЛЬЗОВАТЕЛЯ>.github.io/<НАЗВАНИЕ_РЕПОЗИТОРИЯ>/`

Вам больше не нужно вручную редактировать файл `vite.config.ts` — имя репозитория определяется автоматически во время сборки.
